<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
         
    <changeSet author="FRO" id="create_schema_sabb">
	    <sql dbms="postgresql" endDelimiter=";">
	        CREATE SCHEMA sabb
	    </sql>
	</changeSet>
         
     <changeSet id="create_table_season" author="FRO">
        <createTable schemaName="sabb" tableName="season">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="season" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="active" type="boolean" defaultValueBoolean="false">
            	<constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    
    <changeSet id="rename_column_season" author="FRO">
    	<renameColumn schemaName="sabb" tableName="season" oldColumnName="season" newColumnName="name"/>
    </changeSet>
    
     <changeSet id="create_table_category" author="FRO">
        <createTable schemaName="sabb" tableName="category">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="active" type="boolean" defaultValueBoolean="false">
            	<constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    
    <changeSet id="create_table_association" author="FRO">
        <createTable schemaName="sabb" tableName="association">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="main" type="boolean" defaultValueBoolean="false">
            	<constraints nullable="false"/>
            </column>
            <column name="active" type="boolean" defaultValueBoolean="false">
            	<constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    
    <changeSet id="create_table_team" author="FRO">
        <createTable schemaName="sabb" tableName="team">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="id_season" type="int">
            	<constraints nullable="false"/>
            </column>
            <column name="id_association" type="int">
            	<constraints nullable="false"/>
            </column>
            <column name="id_category" type="int">
            	<constraints nullable="false"/>
            </column>
            <column name="active" type="boolean" defaultValueBoolean="false">
            	<constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint baseTableSchemaName="sabb" baseColumnNames="id_season"
                             baseTableName="team"
                             constraintName="fk_team_season"
                             referencedTableSchemaName="sabb"
                             referencedColumnNames="id"
                             referencedTableName="season"/>
       	<addForeignKeyConstraint baseTableSchemaName="sabb" baseColumnNames="id_association"
                             baseTableName="team"
                             constraintName="fk_team_association"
                             referencedTableSchemaName="sabb"
                             referencedColumnNames="id"
                             referencedTableName="association"/>
       <addForeignKeyConstraint baseTableSchemaName="sabb" baseColumnNames="id_category"
                             baseTableName="team"
                             constraintName="fk_team_category"
                             referencedTableSchemaName="sabb"
                             referencedColumnNames="id"
                             referencedTableName="category"/>
    </changeSet>

</databaseChangeLog>